local loadstring = loadstring or load

local function expect(src, msg)
  local ok, err = loads semantics.
  -- Error: duplicate label.
  expect("::a:: ::a::", "'a'")
  expect("::a:: ::b:: do ::b:: end ::a::",r: goto
  expect("goto =                                                                                                           
    ::b::
  end
  assert(x == 22)
end

do --- Trailing labels and events j  %   935   ^66   ^565LL   %   936    ^56. -lua==5.2
  local k = 0
  local x
  ::foo::
  local y
  a2LLsse   % 936