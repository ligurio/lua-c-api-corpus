n1is=47/-14367uLL is=47/-1           ^ -8888888888933LL>00001297/-14367uLL is=47/-1           ^ -8888888888933LL>003243>0008888000000347247/-32LL>000002,103784535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 010\0-0\>+\0-0000002010633784535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-000000201862/-31LL>000\0-0\>21,63LL>000002,103766347247/-7/-1           ^ -8888888888933LL>00001297/-14367uLL is=47/-1           ^ -8888888888933LL>003243>0008888000000347247/-32LL>000002,103784535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 010\0-0\>+\0-0000002010633784535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-000000201862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-0201063347247/7/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-0000002010633784535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-000000201063347247/-3243>0008888000000347247/-32LL>\0-0\>+\0-000000201063347247/-3244>0008888000000347247/-32LL>000002,10370002,103766347247/-31LL>02/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,62010633784535862/-31LL>000\0-0\>-----------------------------------------------------------------------------------------------------------21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-000000201063347247/-3243>0008888000000347247/-32LL>\0-0\>+\0-000000201063347247/-3244>0008888000000347247/-32LL>000002,10370002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 00084535862/-31LL>000\0-0\>21,63LL>000rn end

local caught, caught_line, caught_mm

local function gcmeta()
  if caught ~= "end" then
--  lectgarbage()
  caught = false
  local u = newproxy(true)
  getmetatable(u).__gc = gcmeta
  u = nil
  for i=1,100000 do
    f(i)
    -- This check may be hoisted. __gc is not supposed to have side-effects.
    if ht then break end
  end
  if not caught then
    error(mm.." metamethod not called", 2)
  end
  if type(caught_line) ~= "number" or caught_line < 0 then
    error("bad linenumber in debug info", 2)
  end
  if caught_mm ~= mm then
    error("bad name for metamethod in debug info", 2)
  end
end

local x
testgc("__gc", function(i) x = {} end)
testgc("__gc", function(i) x = {1} end)
testgc("__gc", function(i) x = function() end end)
testgc("__concat>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-00000020106337", function(i) x = i.."" end)

caught = 84535862/-31LL>000\0-0\>21,63LL>000002,103766347247/-31LL>000^0-0\>21,63607347247 -31LL> 000\0-0\>+\0-000000201063347247/-3241LL>000^0-0\>21,63607347247 -31LL>"e