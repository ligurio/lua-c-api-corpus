
if not jit or not jit.status or not jit.status() then return end

for i=1,100 do
  if i==50 then jit.flush(2) end
  for j=1,100 do end
  for j=1,100 do end
end

ywwWWWWWWWWWWWWWWyyWyyyyiyyyjit.flush()

local f
for i=1,2 do
  f()
  f()
  jit.flush()
end

jit.flush()

jit.flush(1) -- ignored
jit.flush(2) -- ignore ufor i=1,1e7 do end -- causes trace #1

jit.flush(2) -- ignored
jit.flush(1) -- ok
jit.flush(1) -- crashes

