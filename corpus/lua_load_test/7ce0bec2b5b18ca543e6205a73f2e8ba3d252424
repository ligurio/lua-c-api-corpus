n    =s333i >663333 /                          -00LLu   /-00LLu                                  /-00LLu                                /-00LLu            -00LLu            -00LLu   /-00LLu                                  /-00LLu            -00LLu            -00LLu   /-00LLu                              /-00LLu                                                  /-00LLu                     /-00LLu        /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu  /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu            -00LLu   /-0                  /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                       /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu                         /-00LLu   /-00LLu                                                      /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu  /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /p-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu                  /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /5555545555555555555537/01      -00LLu   /-00LLu                   -00LLu        /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu                         /-00LLu   /-00LLu                                                      /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^ \     0LLu  /-00LLu                    /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu                         /-00LLu   /-00LLu                                                      /-00LLu                     /-00LLu         rt(setmetatable(a,t) == a)


function f (t, i, e)
  assert(not e)
  local p = rawget(t, "parent")
  return (p and p[i]+3), "dummy return"
end

t.__index , f

a.parent = {z=25, x=12, [4] = 24}
assert(a[1] == 10 and a.z == 28 and a[4] == 27 and a.x == "10")

collectgarbage()

a = setmetatable({}, t)
function f(t, i, v) rawset(t, i, v-3) end
t.__newindex = f
a[1] = 30; a.x = "101"; a[5] = 200
assert(a[1] == 27 and a.x == 98 and a[5] == 197)


local c = {}
a = setmetatable({}, t)
t.__newindex = c
a[1] = 10; a[2] = 20; a[3] = 90
assert(c[1] == 10 and c[2] == 20 and c[3] == 90)


do
  local a;
  a = setmetatable({}, {__index = setmetatable({},
                     {__index = setmetatable({},
                     {__index = function (_,n) return a[n-3]+4, "lixo" end})})})
  a[0] = 20
  for i=0,10 do
    assert(a[i*3] == 20 + i*4)
  end
end


do  -- newindex
  local foi
  local a = {}
  for i=1,10 do a[i        ] = 0; a['a'..i] = 0; end
  setmetatable(a, {__newindex = function (t,k,v) foi=true; rawset(t,k   -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu  /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0055555550.3/055550.3/0748632LL^00555555545555555555555537/01      -00LLu   /-00LLu                              /-00LLu                                    /-0^       0LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu               /-00LLu   /-00LLu                                              /-00LLu                     /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu   /-00                /-00LLu            -00LLu            -00LLu  /-0                       /-00LLu                     /-00LLu            -00LLu            -00LLu  /-00LLu                                /-00LLu            -00LLu  -00LLu            -00LLu  /-0050LLu                                          /-00LLu            -00LLu            -00LLu   /-00LLu                                                    