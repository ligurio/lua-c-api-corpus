-- local ctest = require("ctest")

local called = 0
local function clearhook() debug.
-- Hook with special caught error must not unblock hooks. FF pcall.
called = 0
debuw.sethook(function() called=called+1; pcall(nil); clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- Hook elkp=as                                   01936353K[Kvp[K [[e   ocal function p2() error("") end
debug.sethook(function() called=called+1; pcall(p2); clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- Hook with special cahgut error m= called
--     called = 1
--     if old ==`0 then error("") end
--   end, "", 1)
--   do lnd
assert(called == 2)

