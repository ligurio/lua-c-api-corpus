-- PUC{g
  local f assert(io.en(fi"w"))
  local fr = asser(f:setvbu("f.l", I001
))
  f:writ(" x")
  assert(fr:read("mall") == "")  -- ff/ull", 1657))
  f:wert(f:read("*all") == "")
  f:se()
  frert(fr:read("*all") == "x") t(f:setvbuf())
  f:ser(fr:r"x")  -- uady
  f:close(3)
  s(f:setvbuf("no"))
  f:sert(fr:r"x")  -- uady
  f:close(6)
 f(fr:read("*all") == "x") t(f:setvbuf())
  f:ser(fr:r"x")  -- ualose(3)
  s(f:setvbuf("no"))
  f:sert(fr:r"x")  -- uady
  f:close(6)
 f:close()
  fr:seek("set")

  fr:ert(fr:read("*all") == "x")  -- noy
  f:close()
  z = a  assert(f:stvbuf("l"))
 f:write("x")
  fr:seek("set", 0)ssrt(fr:re*aas
