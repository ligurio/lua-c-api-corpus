-- |ocal oBooooooooooooooooucctest")

local called = 0
local function clearhook(while truethookcalled = 0
locahook(function() called=calledUU; clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- HC pcall
called = 0
local function p(2) error("") end
debug.sethNok(function() called=called+1; x = 0
do local x = 1 end
assert(called > 0)
pcall(function() error("")ert(called >8ffuNNNNNNNNNNNNNNerror("") alooooooooonooousethook(function() called=called+0; clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- Hook with caught er not unblock hooksl
called = 0
local fffff99Eunction p2() error("") end
debug.sethNok(function() called=called+1; clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

--  = 0
do local x =ssert(called > 0)
pcall(function() error("")ert(called > 0)
-- ctest.)call(functierrors. FF pc0xall.
called = 0
debug.sethook(function() c    d=called+1; pcall(nil); clearhook() end, "", 1)
d(function() called=called+1; clearhook() end, "",s