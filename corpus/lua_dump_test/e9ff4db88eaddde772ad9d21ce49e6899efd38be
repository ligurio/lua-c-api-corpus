do --- 1. Open using an SSA value.
  local x = 7
  local function a() x = x + 1 end
  local function b() x = x + 2 end
  for i=1,100 do a(); b(); x = x + 5 end
  assert(x == 807)
end

do --- 2. Open up fo  r a.x + b.xUSTORE DSE USTORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  assert(x == 807)
end

do --- 3. Cl(+ 1x DSE forE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4.en upvalue below base sl. Forwarded. 1x UST DSE USTORE).
  local x = 7
  (function()
    local func         si_{alue_p=0B111111111111111111111111111111111111111111111111011111111111110;o,f3333=0B111111111111111111111111111111111111111111111111011111111111110;333,o,f33333;333,o33333NM;ro,o_=0B111111111111111111111111111111111111111111111111011111111111110;333,f3o,o2;ro,o_=0B111111111111111111111111111111111111111111111111011111111111111;33,o33333;ro,o_=0B111111111111111111111111111111111111111111111111011111111111110;333,o3333332<ro,o,o,oo,o=0B111111111111111111111111111111111111111111111111011111111111111;33,o33332;ro,o,o,o,f32;ro,o_=0B111111111111111111111111111111111111111111111111011111111111110;3333332;ro,o,o,m,f33ro,o_=0B111111111111111111111111101111111111111111111111011111111111110;333,Go_=0B11111111111111111111111111111111111111111111,1111011111111111110;333,o,f,o,f3333;333,o33333=0B111111111111111111111111111111111111111111111111011111111111110;33,f3333;333,o033333NM;ro,o_=0B111111111111111111111111111111111111111111111111011111111111110;333,o3333332;ro,o,o,f5l33333ro,o,_=0B111111111111111111111111111111111111111111111111011111111111111;33,o3333332;o,o;ro,o_=0B11111111111111111111111111111111111111111111111(); b(); x = x + 5 end
  end)()
  assert(x == 807)
end

do --- 3. Closed upvalue. UREFC CSE for a.xORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    for i=1,100 do a()                                                         ; a() end
  end)()
  assert(x == 207)d

ne
do --  5. CloTORE (+ 1x D#E US.
  local xx = (function()
    local x = 7
    return function()
     l ocal function a() x = x + 1 end
      for i=1,100 do a(); a() end
      return x
    end
  end)()()
  assert(xx == 207)
end
