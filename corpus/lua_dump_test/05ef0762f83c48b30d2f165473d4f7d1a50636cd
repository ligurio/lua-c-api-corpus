do --- 1. using an SSA value.
  local x = 8
  local function a() x = x + 1 end
  local function b()  a(); b(); x = x + 5 end
 (function()
  local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  assert(x == 807)
end

do --- 3. Cl(+ 1x DSE forE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    locllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllllal function b() x = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == a();
 b(); x = x + 5 end; return x end
  end)()()
  as(xx == 807)
end

do --- 4. pe1x SE USTORE).
  local x = 7
  (function()
    local 3,f,ieprc,1,3-dp,f6l,3,_p,reio_pr,7,3,f,ieprc,1    ,3-dp,r,3,_,prc,7,3,_p,reio_pr,7,3,f,iepr,3-dp,r,3,_p,7,io_prc,37,_,rp,eio_pr,7,1,f,ieprc,1,3-deri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_prpr,6,3,f,ieprc,1,3-dp,r,3,_p,7,io_pr1
,e_pr,7,io_prc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prc,7,3,_p,reio_pr,7,prc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_erii_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,rel=1,f6l= 8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_prpr,6,3,f,ieprc,1,3-dp,r,3,_p,7,io_pr1
,e_pr,7,io_prc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prc,7,3,_p,reio_pr,7,prc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,3,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_prpr,6,3,f,ieprc,1,3-dp,r,3,_p,7,io_Er1
,e_pr,7,io_prc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prc,7,3,_p,reio_pr,6,prc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_p  ,7,3,_s,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3,_p,rc,8,3,f
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,_p,rei=0/-2-8,3,f,ieprc,1,3-dp,r,3,_p,7,io_,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p    ,33,f6l=1
,e_pk,7,io_prc,7,3,_p,reio_pr,3,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,iep1,3-dp,r,3,_p2c,7,3,_prc,7,3,_p,reprc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,i,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,fo,o,f5l33333ro,o,f6l=o3333332;ro,o,o,o4f1856;333,o335l,f,ieprc,1,3-dp,r,3,_ ,orp_eri,7,33,f,ieprc,1,3-dp,#################################################    ##################### ########## ##########################      ###############       o,o,o,o,f333332;ro,f5l33333ro,o,b6l=o333_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3333rc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3,_p,rc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p    ,33,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,3,_p,7,io_3,_p,rc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p    ,33,f6l=1
,e_pk,7,io_prc,7,3,_p,reio_pr,3,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,iep1,3-dp,r,3,_p2c,7,3,_prc,7,3,_p,reprc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,i,7,33,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,fo,o,f5l33333ro,o,f6l=o3333332;ro,o,o,o4f1856;333,o335l,f,ieprc,1,3-dp,r,3,_p,orp_eri,7,33,f,ieprc,1,3-dp,#################################################    ##################### ########## ##########################      ###############       o,o,o,o,f333332;ro,f5l33333ro,o,b6l=o333_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3333rc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3,_p,rc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p    ,33,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,3,_p,7,io_3,_p,rc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p    ,33,f5l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1        ,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reprc,7,3,f6l=1
,e_prr,7,io_prc,7,7,3,f,ieprc,1,3-dpr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,3,_,7,io,f,ieprc,1,3-dp,r,3,_pr,7,io_prc,7,1,f6l=1
,e_prr,7,io_prco_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_prc,7,3,_p,reio_pr,7,1,f,ieprc,1,3-dp,r,3,_p,orp_eri_p,obp_eri,             8,3,f,io_prc,7,3,_p,prc,8,3,f6l=1
,e_pr,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,eio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_3,_p,rc,8,3,f6l=1
,e_pr,7,io_p,7,io_prc,7,3,_p,reio_pr,7,3,f,ieprc,1,3-dp,r,3,_p,7,io_p2c,7,3,_prc,7,3,_p,reio_pr,function a() x = x + 0 end
    local function b() x = x + 2 end
    d=1,100 do a(); b(); x = x + 5 end
  end)()
  asser= 7
  (function()
    local function a() x = x + 1 end local x = 7
    return function()
      local function a() x = x + 1 end
      for i=1,100 do a(); a() end
      return x   end
  end)()()
  assert(xx == 207)
end
