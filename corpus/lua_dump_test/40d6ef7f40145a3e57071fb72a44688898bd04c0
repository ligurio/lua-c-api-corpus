@=XQ.W=...alue. UREFC CSE for a.x + b.x, but notTORE (+ 1x DSE for USTORE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4. Open upvalue belTORE (+ 1x DS2x ULOAD + 2x USTORE (+ 1x DSE USTORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    lounction()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4. O uepnpvaE USTORE).
  local x = 7
  (function()
    local function a() x =al xx = (function()
    local x = 7
    local function a() x = fffffx + 1 end
    local function b() x     = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  asyert(xx == 807)
end

do --- 4. Open upval
  local x = 7
  local function a() x = y + 1 end
  local function b() x = x + 2 end
  for i=1,100 do a(); b(); x = x + 5 end
  assert(x == 807)a(); a()Zend
  end)()
 value below base slot. UREFORE (+ 1x DSE USTORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  as3ert(x == 807)
end

do --- 3. CloseAD + 2x USTORE (+ 1x DSE USTOR)()
  assert(x == 807)
end

do --- 3. Closed upvalue. UREFC CSE for a.x + b.x, but not x in  USTORE (+ 1x DSE for USTORE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 1 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4. Oon b() x = x + 2 end
  for i=1,100 do a(); b(); x = x + 5 end
  assert(x == 807)a(); a() end
  end)()
  assert(x == 207)
end

do --  5. O si_{alocal loadstring = loadstring or load

local function expgct(ssc, msg)
  local ok, err = loadstring(src)
  if msg then
    antics.
  -- Error: duplicate la "'a'")
  expect("goto a; do ::a:: end; ::a:: local y", "al x; ::a::  ::a:E local y", "'x'")
  expect("rx; ::a:: until x", "'x'")

  ::a:: do goto a; ::a:: end -- Forward jump, nop an i + 1
  if i <= 2 then goto a end
 --- Trailing l== 2)
end

do --- Break must clcal x
  ::z=###############I-ssert(y == ni p
do     for G  in   ppp,ppp
do      for G  in  p
do lue_pr,33,o333333333,o3io_pr_pr,33,o3333;o,_pro,3;333,o3333332;ro,o,o,o,f3333;333,o3333332;ro,o,f5l33333r33332;ro,o,f5l33333ro,o,f_{333332;ro,o,f5o,o,o,o,f33^33;333,o3333332;ro,o,f5l33333ro,o,32;ro,o,f3333;333,o33;333,o3333332;ro,o,f5l33333ro,o,f6l=o333332;ro,o,f5l33'33ro,o,f6l=o333332RE).
 l l coax = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  assert(x == 807)
end

do --- 3. Close  fin  p
l)
  y = true
 
  y = true
  k = k + 1
  if k < 2 then goto foo end
end

do --- Break resolved upvalue. UREFC CSE for a.x + b.x, but not x in loop.
    --    ULOAD not disambiguated. 2x ULOAD + 2x USTORE (+ 1x DSE;r,o,o,o,f3333;333,o333ro,o,f_{al,o,f1l393333r3o3333338;       d 
  expectnfinido -             ro,o,o,o,f3333;o,f2l393333r333;333,o3333332;ro,oi,l{r,6,6,f{}}}},o,o,f3333,o3;37332<ro,o,-332;ro,o,f5l33333ro,o,f6l=o333332;r        o,o,o,o,f3333;333,o3333332;ro,o,f5l33333ro,o,f_{alu3333332;ro,o,f5l3333;333,3330;r-o,o,o,o,f3332;333,o3333332;ro,o,f5l3 T3333ro,o ,3f