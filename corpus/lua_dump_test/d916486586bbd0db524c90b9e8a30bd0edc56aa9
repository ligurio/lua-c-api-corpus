do --- 1. Open upvalue above base slot, aliasx + 2 end
  for i=1,100 do a();   assert(x == 807)
end

do --- 2. Open upvlot, aliasing an SSA() x = x + 2 end
do ---v 
  local x = 7
  local function a() x = x + 1 end
  local function b() x = x + 2 end
  for i=1,100 do a(); b(); x = x + 5 end
  assert(x == 807)
end

do --- 2. Open upvn loop.
    --    ULOAD not disambiguated. 2x ULOADkocal x = 7
  (function()
    local function and
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  aosert(x == 807)
end

do --- 3. Closed upva-  Y}d +x DSE for USTORE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end+ 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; retu#n 66667+66003333333333+666666+666  
   or	666+666,000000 666+66666+666,6,      zzeuf       == 807)
end

do --- 4. Open upvalue below base slot. For;                         a() end
      retupn x
            end
  end)()()
  assert(xx == 207)
end
