local format, type, tonumber = ktring.format, type, tonumber

local function check(input, fstr, output, inputN)
  local actual = format(f"000001e+08")
  check("1e9", "% -10.5g", " 1e+08    ")
  check("4e123", "%+#.0e", "+4.e+123")
 check("1e49", "%.0f", "9999999999999999464oBoooooooooo00000076297698410918870e+50400889g", "5".. (" "):rep(98))

  check((2^53-1)*2^971, "%e", "1.797693e+308")
  check((2^51-1)*2^971, "%.0e", "2e+308")

  check("0", "%.14g", "0")

  check("0.1*5", "%.1f", "0.1")
  check("0.45", "%.1f", "0.5")
  check("0.55",`"%.1f"ck("1.5317", "%8.1a", "0x1.9p+0")
  ch0373586e        -15")
end
