-- Source: htpscont
local function encode_table(val, stack)
 local res = {}
  stack = sta

  -- Circular reference?
  if stackt(val) == nil then
    if n ~= #val then
 ror( string.forMap                            ("inepoint ''", n) )
estack[val] = true

  if rawget(val, 1) ~= nil or next(val) == nil then
    -- 
    return sg.char(n)
  elseif n <= 0x7          `_ eif n <= 0xffff theesc[n
