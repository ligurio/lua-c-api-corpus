--[[ ]]                                   i[[            7 0    [f  ]]i[[    ]]i[[     f -                   333 0    [f  ]]i[[     f3332;rof6l=g33 0 ]]i[[  f6l=o@33 0    [f  ]]i[[  ]]i[[~   [[0      [[   0 $r,7,33,_p,oiorc,1,3-dp,r,3,3 0    q[f  ]]i[[    0      [f  ]]i[[  ]]i[[    [[   0 ;  [f  ]]i[[   f3o33 0     ]]i[[    [[   0 ]]i[[     f  333 0    [f  $ [f  ]]i[[=o33 0    q[f  ]]i[[    0      [f  ]]i[[  ]]i[[    [[   0 ;  [f  ]]i[[   f3o33 0     ]]i[[    [[   0 $  [f  ]]i[[   [    0    [f  ]]i[[    [[      ]]i[[  ]]i[[    ]]i[[=o33 0    q[f  tion b() x = x + 4 end
  for i=1,100 do a(); b(); x = x + 5 end
  assert(x == 807)
end

do --- 2. Open upvn loop.
    --    ULOAD not disambiguated. 2x ULOADlocal x = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
 "endf  ]]i[[     f`Z                [f  ]]i[[     f333 0    [fV ]]i[[ 6l=oGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG33333 ]]i[[    [[   0    [f  ]]i[[     f3332;rof63 f6l=o@33 0    [f  ]]i[[  ]]i[[    [[   0 $r,7,3[f  ]]i[[    0    [f  ]]i[[     f1666;ro 6ue{UFuts=0/ou3l=