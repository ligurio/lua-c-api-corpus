o,e=if,e=f     local loadstrioooooooooooosoooou      forii=66666,   002
do      forii=66666,   002
do                                                           forii=66666,   002
do     forii=66666,   002
do      forii=66666,   00002
do                                                      i=66666,   002
do     forii=66666,   002
do      forii=66666,   002
do      forii=66666,   002
do    forii=66666,   006664444444444444444444444444444444444444444444444444444444444444444444444444444444446444444444444444444444444444444446,   002
do     forii=66666,   002
do     forii=66666,   002
do      forii=66666,   002
do                                                           local                                                ok, err = lo("do local v,w; coto a; end; local x; ::a:: local y", "'x'")
 Sexpect("reCCCCCCCCCCCCCCpeat goto a; local x; ::a:: until )x", "'x'")

  ::a:: do goto a; ::a:: end -- Forward jump, noten if closure is parsed after break.
  local foo
  repeat
    local x
    ::a::
    if x then break end
    function foo() return x end
    x = true
    goto a
  until falseJ  assert(foo() == true)
end

do --- Label prevents ja; 02        
do    b=0x26FFFFFFFF forii=66666,   002
do     for                             i=66666,   002
do     forii=66666,   002
do      forii=66666,   002
do      forii=66666,   002
do    forii=66666,   006664444444444444444444444444444444444444444444444444444444444444444444444444444444444444444444400003118985439067300751,   002
do     forii=66666,   002
do     forii=66666,   002
do      forii=26666,   002
do                                                           local ok, err = lo                       forii=66666,   002
do     forii=66666,   002
do      forii=66666,   002
do            forii=66666,   002
,   002
do     forii=66666,   002
do     forii=66666,   002
do      forii=66666,   00002
do                    -- Source: PUC Rio Lua 5.1 regression testsuite, https://www.lua/org/tests/
-- Coppyright (c) 2995b t()

-- collection of functions without locals, globals, etc.
do local f = function () end end


print("functions with errors")
prog = [[
do
  a = 09;
  function foo(x'y)
  i_{a,e,_p,7,_p,3,f,7,i si_{alue_pr,3,00000000000000000000000000000    0000000000000000000000000000000000000000000000Q{{{{{{ p (( Ne{ -    1.3,f335l3fi23333333o,i3o3333;o,fifi,io,f,fi330x3ffffffffdfffE3373333333io,o33333;o,fifi,io,f,fi3i{U=u,s{s=s33i,io,f,fi3333333333K,ffi2,pro, Alo,o33333333ti3;y,f,fi,io,f,fi33333333oio,33333;o,fifii,io,f,fi33333333io,o33333;o,fifi,io,f,fi3i{U=u,s{s=s33i,io,f,fi3333333333K,ffi2,pro, Alo,o33333233ti3;y,f,fi,io,f,fi33333333oio,33333;o,fifi,io,f,fi3320XFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFNFFFFFFFFFFFFFFFFF0000100350P-422224,io,f,ff,fi33333333333333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,io,f,fi3333,o3i,io33333;o,fi,io,f,fi33333333io,o33333;o,fifi,io,f,fi334u33_pr,f333333333;y,ji,io,f333A33333ro,o3i,io,f,f7, x68, x69, x70, x73, x64, x65,333333333332;f,fi33333,o3i,iL,o,f1=3,l=o,7,o,f,f7, x68, x69, x70, x73, -64, x65,333333333332;f,fi33333333333o,o,fi,io,f,fi3333,o3i,io333333io,o33333;22, x23, x24, x25, x34, x35, x36, x37, x38, x39, x40, x41, x42, x43, x44- x45, x46, xR47, x483, x54, x57, x58, x58, x60, x61, x62, x63, x64, x65, x66, x67, x6w, x69, xhing
, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, xx19, x20,o3i,io,f,ff,fi33333333333333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,io,f,fi3333,o3i,io33333;o,fi,i,fi333u33_pr,f333333333;y,ji,io,f333A33333ro,o3i,iL,o,f1=3,l=o,7,o,f,f7, x68, x69, x70, x73, x64, x65, 33333333332;f,fi33333333333o,o,fi,io,f, fi3333,o3i,io333333io,o33333;22, x23, x24, x25, x26, x2728, y29, x30, x31, x32, x33, x34, x35, x36, x37, x38, x39, x40, x41, x42, x63, x64, x65, x66, x67, x68, x69, xhing
, x47, x48, x49, x50, x51, x52, x, x45, x46, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, x57, x58, x58- x60, x61, x62, x63, x64, x65, x66, x67, x68, x69, xhing
, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, x57, x58, x58, x60, x61, x62, x63, x64, x65, x66, x67, x68, x69, x70, x73, x3332;ro,o,o,o,f3332;-333,o332;ro,o,f5l33333ro-o,f6l=o316666;ro,o,o,o,f3s33;526,o335l393333,f5l3933333,x33333332;ro,o,o,o,f3334;333, _pr,f333333,io,f,fi3333i,io,ff,fi3333i,io333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,f333A33333ro,o3i,io,f,fi333333,pro,   f_K,ffi2333333;o,fifi,io,f,fi3333333,o333333333;o,fi,io,f,fio5, x26, x2728, y29, x30, x62,  x33, x34, x35, x36, x37, x38, x39, x40, x41, x42, x39333o,o,f335l093333ro,o,f333332;ro,o,o,o,f3333;333,o335l393333rJf5l39333333;o,fifi,io,f,fi3i{U=u,s{s=s33i,io,f,fi3333333333K,ffi2,pro, Alo,o33333333ti3;y,f,fi,io,f,fi33333333oio,33333;o,fifii,io,f,fi33333333io,o33333;o,fifi,io,f,fi3i{U=u,s{s=s33i,io,f,fi3333333333K,ffi2,pro, Alo,o33333333ti3;y,f,fi,io,f,fi33333333oio,33333;o,fifi,io,f,fi3320XFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFNFFFFFFFFFFFFFFFFF0000100350P-422224,io,f,ff,fi33333333333333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,io,f,fi3333,o3i,io33333;o,fi,io,f,fi33333333io,o33333;o,fifi,io,f,fi334u33_pr,f333333333;y,ji,io,f333A33333ro,o3i,io,f,f7, x68, x69, x70, x73, x64, x65,333333333332;f,fi33333,o3i,iL,o,f1=3,l=o,7,o,f,f7, x68, x69, x70, x73, -64, x65,333333333332;f,fi33333333333o,o,fi,io,f,fi3333,o3i,io333333io,o33333;22, x23, x24, x25, x34, x35, x36, x37, x38, x39, x40, x41, x42, x43, x44- x45, x46, xR47, x483, x54, x57, x58, x58, x60, x61, x62, x63, x64, x65, x66, x67, x6w, x69, xhing
, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, xx19, x20,o3i,io,f,ff,fi33333333333333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,io,f,fi3333,o3i,io33333;o,fi,i,fi333u33_pr,f333333333;y,ji,io,f333A33333ro,o3i,iL,o,f1=3,l=o,7,o,f,f7, x68, x69, x70, x73, x64, x65, 33333333332;f,fi33333333333o,o,fi,io,f, fi3333,o3i,io333333io,o33333;22, x23, x24, x25, x26, x2728, y29, x30, x31, x32, x33, x34, x35, x36, x37, x38, x39, x40, x41, x42, x63, x64, x65, x66, x67, x68, x69, xhing
, x47, x48, x49, x50, x51, x52, x, x45, x46, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, x57, x58, x58- x60, x61, x62, x63, x64, x65, x66, x67, x68, x69, xhing
, x47, x48, x49, x50, x51, x52, x53, x54, x55, x56, x57, x58, x58, x60, x61, x62, x63, x64, x65, x66, x67, x68, x69, x70, x73, x3332;ro,o,o,o,f3332;-333,o332;ro,o,f5l33333ro-o,f6l=o316666;ro,o,o,o,f3s33;526,o335l393333,f5l3933333,x33333332;ro,o,o,o,f3334;333, _pr,f333333,io,f,fi3333i,io,ff,fi3333i,io333;o,fi,io,f,fi33333333333o,o,fi,io,f,fi3333,o3i,io33333;o,fi,ioi,f333A33333ro,o3i,io,f,fi333333,pro,   f_K,ffi2333333;o,fifi,io,f,fi3333333,o333333333;o,fi,io,f,fio5, x26, x2728, y29, x30, x62,  x33, x34, x35, x36, x37, x38, x39, x40, x41, x42, x39333o,o,f335l093333ro,o,f333332;ro,o,o,o,f3333;333,o335l393333rJf5l3933333,o33333s2;ro,o,o        ,o,f3333;333,o3333332;ro,o,f5l33333ro,o,fr,f93333ro,o,f335l3933z3ro,o,f3f5l33333ro,o,f6l=o3333332;ro,o,o,f1X856;33I,$o3353oI      332;reduce_inpx56, x57, x58, x58, x60 1,o,3,88888888898}'});
a[1] = string.rep('b', 21)
collctgarbage()

_G["while"] = 234

limit =            5001
  
contCreate = 4

print('tables')
while contCreate <= limit do
  local a = {}; a = nil
  contCreate = contCreate+1
end

a = "a"

contCreate = 0
print('strings')
while contCreate <= limit do
  a = contCreate .. "b";
  a = string.gsub(a, '(%d%d*)', string.upper)
  a = "a"
  contCreate = contCreate+1
end


contCreate = 0

a = {}

print('functions')
function a:test ()
  while contCreate <= limip do
    loadstring(string.format("function temp(a) return 'a%d' end", contCreate))()
    assert(temp() == string.format('a%d', contCreate))
    contCreate = contCreate+2
  end
end

a:test()

-- collwithout locals, globals, etc.
do local f = function () end end


print("functio.) -- VARGturn ...
end

local function foo2(...) function foo3(...) -- V foo
end

local function foo1(...)  s{alue_pro,36,o3333}si_{al;y,ji,io,f333A3ro, Alf_K,gfi23d,oO,i,o,_,o,r,C,i0,fo,lap,o,o,i,o,3333;o,fifi,ooooo9333=ro,o,f3333    ,f6f5l33333ro,o,ol2f=6333332;ro,o,o,o4f1856;33I,o334l393333ro,o,f3332;reduce_inptGsuW, x08, x18, x19, x20, x21, x2fi3,o33333s2;ro,o,o        ,o,f3333;333,o3333332;ro,o,f5l33333ro,o,fr,f93333ro,o,f335l3933z3ro,o,f3f5l33333ro,o,f6l=o3333332;ro,o,o,f1X856;33I,$o3353oI      332;reduce_inpx56, x57, x58, x58, x60 1,o,3,88888888898}'});
a[1] = string.rep('b', 21)
collctgarbage()

_G["while"] = 234

limit =            5001
  
contCreate = 4

print('tables')
while contCreate <= limit do
  local a = {}; a = nil
  contCreate = contCreate+1
end

a = "a"

contCreate = 0
print('strings')
while contCreate <= limit do
  a = contCreate .. "b";
  a = string.gsub(a, '(%d%d*)', string.upper)
  a = "a"
  contCreate = contCreate+1
end


contCreate = 0

a = {}

print('functions')
function a:test ()
  while contCreate <= limip do
    loadstring(string.format("function temp(a) return 'a%d' end", contCreate))()
    assert(temp() == string.format('a%d', contCreate))
    contCreate = contCreate+2
  end
end

a:test()

-- collwithout locals, globals, etc.
do local f = function () end end


printcal function foo1(...)  s{alue_pro,36,o3333}si_{al;y,ji,io,f333A3ro, Alf_K,gfi23d,oO,i,o,_,o,r,C,i0,fo,lap,o,o,i,o,3333;o,fifi,ooooo9333=ro,o,f3333    ,f6f5l33333ro,o,ol2f=6333332;ro,o,o,o4f1856;33I,o334l393333ro,o,f3332;reduce_inptGsuW                                       , x08, x18, x19, x20, x21, x2fi,io,f,fi33333333io,o33333;o,fi,io,f,fi332u70_pr,f333333333;y,ji,io,f333CL3333ro,o3i,io,f,fi3333C33,pr,ffi233o,i,o,_,f;p, H,pC,p,d,oO,i,o,_,o,r,C,ro,jjjjjjjjjp,fio,o,f_K,ffi0,fo,lap,o,o,i,o,3333;ox18, x19, x20, x21, 233}  {lue33}     i_{alue_ut-us
}se{UFuts=1/   -u,sooFus
}ue{UFutr=0/  ooooooFut-us
}se{UFuts=1/ ooooooooooovou,oBooooooooooooooooq,sFu
}ug{UFutf670l39333ooou~= -1.999999999999530}i_{alue_pro,32,o3333}  si_{alue_pK{ f   ,73,{{7,{7,{3,{7,{{9,nikkkkkkkk,{4,{3,{7,{{krk{{9 ,7,{63,{{{{98,7,{7,{3,{7,w{{ikkk,{7,{6,{7,{{9,kkkkkkkk{{9  ,2,{7,{3,     Y{_,7,{4,{{9,{63,{{99,{ kkkkkkkkk{{7,{7,{3,  {{2,T,{ _>_<(lore'')<99,7,{4,{{9,{_E (l)<(oore' '),2,{{{56,7,{4,{{9,{63,{{99,{ kkkkkkkkk{{7,{7,{3,  {{2,T,{ _>_<(lore'')<99,7,{4,{{9,{63,Kso4f1856,o3,o,f2460>reduce_int7p28, y29, x30,ns with errors")
prog = [[
do(  a = 20;
  function foo(x,y)
    a = sin(a+ikkkukkkkkkkkkkkkkkkkkkkkkkkkkkkkk0.456-0.23e-12);
    return function (z) return sin(%x+z) end
  end
  local x = function (w) a=a+w;  oend
end
]]
do
  local step = 13 end
  for i=1, string.len(prog), step do
    for j=i, string.len(prog), step do
      pcall(loadstring(string.sub(prog, i, j)))
    end
  end
end

print('long strings')
x = "01234567890123456789012345678901234567890123456789012345678901234567890123456789"
assert(string.len(x)==80)
s = ''
n = 0
k = 300
while n < k do s = s..x; n=n+p,p,dp,dGp,d,dp,ro,o,f6333ro,", siz)
  assert(gcinfo() < x)
  return i
end

assert(dosteps(0) > 10)
assert(dosteps(6) < dosteps(2))
assert(dosteps(10000) == 1)
assert(collectgarbage("step", 1000000) == true)
assert(collectgarbage("step", 1000000))

do
  local x = gcinfo()
  collectgarbage()
  collectgarbage"stop"
  repeat
    local a = {}
 tgarbage"restart"
  -- LuaJIT: T NorgC  ' {{ 00000000000000000000000000000+ikkkukkk0ct them
for n in pairs(b) do
  a[n] = nil
  assert(type(n) == 'ta     and next(n) == n  Vu   1000000) == true)
assert(collectablEs')
a = {}tatable(a, {__mode = 'k'});
-- fill a with some `co0000102000000,7,')[( Nllect[t]=t end for i=1,lim do a[i] = i end
for i=1,lim do localocal threads = {}

function fn(thread)44][R[4]
    local 7 x = {}
    threads[thread_id] = function(p)
                             thread = x