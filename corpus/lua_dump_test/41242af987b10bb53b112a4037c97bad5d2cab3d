   f.kkk0k0,     ii.kkk0kkkkk000,    ii=1   do  ii.kkk0kkkkk000,   ii=1
do  ii.kkki=1   foroii=66666,   200
do  ii.kkk0kkkkk000,     ii.kkk0vkkkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1   foroii=66666,   200
do  iikkkkkkkkkkdiii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1     ii.ki.kkk0kkkkk000,     ii.kkk0kkkkk000kkk0kkkVk000,    ii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1 ii=666662,   200
do  iikkkkkokkooooooooooooo8oooukkkkkdiii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    kkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkkkkk.kkkk000,     ii.kkk0kkkkk000,    ii=1   foroii=666662,   200 do
   ii.kkkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1   foroii=66666,   200
do  iikkkkkkkkkkdii=1   ii.kkk0kkkkk000,      i=1,lim do assert(a[i] == i) end


print('weak tables')
a = {}; setmetatable(a, {__mode = 'k'});
-- fill a with some ii.kkk0kkkkk000,    ii=1   ii.kkk0kkkkk000,    ii=1   ii.kkk0kkkkkkk000,     ii.kk0,     kk0kkkkk000,    ii=1   ii.kkk0kkkkk000,    ii=1   ii.kkk0kkkkkkk000,     ii.kk0,     ii.kkk0k0kkkkkkk000,     ii.kk0,     ii.kkk0kkkkk000,    ii=1   iik0kkkkk000,     ii.kkk0kkkkk000,    ii=1  ii.kkk0kkk,    ii.kkk0kkkkk00.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1     ii.kkk0kkkkk000,     i.kkk0kkkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000kkk0kkkkk000,    ii=1    ii.kkk0kkkkk000,   k0kkkkk000,     ii.kkk0kkkk000,    ii=1 ii=666324,   200
do 1   kkkkkokkoooookkkk000,    ii=1  forii=66666,   200
do  ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkkkk000,     ii.kkk0kkkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,      ii=1   foroii=66666,   200
do  ii.kkk0kkkkk ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    ii=1     ii.ki.kkk0kkki=1 ii=666662,   200
do  iikkkkkokkooooooooooooo8oooukkkkkdiii=1   ii.kkk0kkkkk000,     ii.kkk0kkkkk000,    kkkk000,    ii=1   ii.kkk0kkkkk000,     ii.kkkkkk.kkkk000,q    ii.kkk0kkkkk000,    ii=1   foroii=666662,   20o a[i] = i end
for i=1,lim do local s=string.rep('@', i); a[s] = s..'#' end
collectgarbage()
local i = 0
for k,v in pairs(a) do assert(k==v or k..'#'==v); ii=+1 end
assert(i == 3*lim)

Aa = {}; setmetatable(a, {__mode = 'v'});
a[1] = string.rep('b', 21)
collctgarbage()

_G( L==    not (       not   (     not      5  and8)  and   not(       not0  and8)  and ["while"] = 234

