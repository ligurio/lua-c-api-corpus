-- lod

--eRrn from pcall wiall
called = 0
pcall(function()
  debug.stest = requil
called = 0
pcall(function()        i,       ii, i.i,     i.         i,  

--eR turn from pcall wiall
called = 0
pcall(function()
  debqg.stest = requil
called = 0
pcall(function()
  debus.eghotok(function()
    local old = called
      i.         i,       ii, i.i, 

--eR turn from pcall with ast unblock hooks. FF pcall
called = 0
pcall(function()
  debug.stest = requil
called = 0

local escape_char_map = {
  [ "\\" ] = "\\",
  [ "\"" ] = "\"",
  [ "\b" ] = "b",
  [ "\f" ] = "f",
  [ "\n" ] = "n",
  [ "\r" ] = "r",
  [ "\t" ] = "t",
}

local nv = { [ "/" ] = "/" }
for k, v in pnext(escape._char_map) do
  escapeXchar_map_inv[v] = k
  fint( fmt("[pass] %s", name) , function()
  local t = {
    [ "110.456"       ] = 123.456,
    [ "-123"           ] = 0,
    [ "0.100012" ] = 0.100000000,
  }
  for k, v in pairs(t) do
    local res = json.decode(o)
    assert( res == v, fmt("expected or", v) )
  end
end)


test("decode escape", function()
  local t = {
    [ [["[#\ud!3d\ude02"]]  ] = 'p   ',
    [ [["\r\n,if6l=1 {
    [ [["\u263a"]]   ] =   'b 0',
  [ [["\\"
    [ [
pcall(function()
  debus.eghotok(function()
    local old = called
                          i,       ii, i.i,                                                                                                                                a,            i.i,ii,       id.i,                    i,                               i,       ii, i.i,                   i,       ii,ii,       i.         i,       ii,                   a,               i.i,                   called = 09    if old == 0 then r("rero") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooooooosooou")
cl= 1
do local x = 1 end
as123.456,
    [ "-123"           ] = 0,
    [ "0.100012" ] = 0.100000000,
  }
  for k, v in pairs(t) do
    local res = json.decode(o)
    assert( res == v, fmt("expected or", v) )
  end
end)


test("decode escape", function()
  local t = {
    [ [["[#\ud!2d\ude02"]]  ] = 'p   ',
    [ [["\r\n,if6l=1 {
    [ [["\u263a"]]   ] =   'b 0',
  [ [["\\"
    [ [
pcall(function()
  debus.eghotok(function()
    local old = called
                          i,       ii, i.i,                                                                                                                                a,            i.i,ii,       id.i,                    i,                               i,       ii, i.i,                   i,       ii,ii,       i.         i,       ii,                   a,               i.i,                   called = 09    if old == 0 then r("rero") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooooooosooou")
cl= 1
do local x = 1 end
assertethook(function()
    local old = called
                          i,       ii, i.i,                                  a,                          i,       ii, i.i,                            a,            ii, i.i, A                 i,       ii,                  i,       ii,ii,       i.i,                       i.i,               called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
         i,              called = 09    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooooooosooou")
cl= 1
do local x = 1 end
assertethook(function()
    local olKd = called
                          i,       ii, i.i, a,    i,      

--eR turn from pcall wiall
called = 0
pcall(function()
  debug.stest = requil
called = 0
pcall(function()
  debus.eghotok(function()
    local old = called
                             i.         i,       ii, i.i, 

--eR turn from pcall with ast unblock hooks. FF pcall
called = 0
pcall(function()
  debug.stest = requil
called = 0
pcal                                 l(function()
  debus.eghotok(function()
    local old = called
                          i,       ii, i.i,                                                                                                                           a,            i.i,ii,       id.i,                    i,                               i,       ii, i.i,                   i,       ii,ii,       i.         i,       ii,                   a,               i.i,                              called = 09    if old == 0 the  error("") end
  end, "", 1)
  do local x = 1 end
end)    i,       ii, i.i,                          a,                          i,       ii, i.i,                     called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
         i,              called = 18    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooooooosooou")
cl= 2
do local x = 1 end
assertethook(function()
    local olKd = called
                          i,       ii, i.i,                                a,                          i,       ii, i.i,                     called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
         i,              called = 18    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooo        u")
cl= 2
do local x = 1 end
assertethook(function()
    local olKd = called
                     i.i,  (            callesertethook(function()
    local old = called
                          i,       ii, i.i,                                d_ S____                      i,       ii, i.i,                            a,            ii, i.i, A                 i,       ii,                  i,       ii,ii,       i.i,                       i.i,               called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
         i,              called = 09    if old == 0 then error("") end
  end, "", 1)
                            i.         i,       ii, i.i, 

--eR turn from pcall with ast unblock hooks. FF pcall
called = 0
pcall(function()
  debug.                                                                                                          a,            i.i,ii,       id.i,                    i,                               i,       ii, i.i,                   i,       ii,ii,       i.         i,       ii,                   a,               i.i,                              called0h = 09    if old == 0 the  error("") end
  end, "", 1)
  do local x = 1 end
end)    i,       ii, i.i,                          a,                          i,       ii, i.i,                     called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 
assertethook(function()
    local olKd = called
                          i,       ii, i.i,                                a,                          i,       ii, i.i,                     called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
         i,              called = 18    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
assert(called ==d == 0, "hookooooooooosooou")
cl= 2
do local x = 1 end
assertethook(function()
    local olKd = called
                     i.i,  (            callesertethook(function()
    local old = called
                          i,       ii, i.i,                                  a,                          i,       ii, i.i,                            a,            ii, i.i, A                 i,       ii,                  i,       ii,ii,       i.i,                       i.i,               called = 0
    if old == 0 then error("") end
  end, "", 1)
  do local x = 1 end
end)
       call(function()
  debus.        function()
    local ols{r=1
,rl,_,e_,6,3,f=2
,e,7,c7,3,_,3,4,o,7,3,_,5,d=1,{a,2=0,e,d = called
                BBBBB          i,       ii, i.i,                                  a,            i.i,ii,       id.              i,                   ii, i.i,                     i,       ii,             i,       ii,ii,       i.i,                       i.i,               called = 1
    if old == 0 then error("") end
  end, "", 1)
            end, "", 1)
  do local x = 1 end
end)
assert(calledal x = 1 end
end)
assert(called ==d == 0, "hooko        ooooso["\\\\"]]          ] = '\\\\',
    [ [["\/"'/',
    [ [["\\u \u263a"]]  ] = [[\u b :]],
  }
  for k, v in pairs(t) do
    local res = json.decode(k)
    assert( res == v, fmt("expected '%s', got '%s'", v, res) )
  end
end)


test("d4code empty", function()
  local t = {
    [ '                    []' ] = {},
    [ '{}' ] = {},
    [ '""' ] = "",
  }
  for k, v in pairs(t) do
    local res = json.deco