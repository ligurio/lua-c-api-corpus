-- Source: hal res = {}
  stack = s  if rawget(val, 1) ~= nil or next(val) == nil then
    -- 
    return sg.char(n)
  elseif n <= 0x7            return string.ch64) +28)
  elseif n <= 0xffff theesc[n
