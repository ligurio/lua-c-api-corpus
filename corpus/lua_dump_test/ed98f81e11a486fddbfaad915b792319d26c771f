do --- 1. Open upvalue.
  local xocal function b() x = x + 2 enb() x = x + 1 end
    for i=1,100 do a(); b() function a() x = x +  local xx = (function()
     local function a() x = x  2 end
    retu            rn function() for i=1,100 do a(); b(); x = x + 5 end:::::::::::::::::::::::::::::::::::::::::::::::::::::::GEEEEEEE:::::::::::::::       for i=2,100 do a(); b(); x = x + 5 end
  end)( 807)
end

do --- 3. Cd upvaue.FC C1 end
 local function b() x = x + 2 enb() x = x + 1 end
    for i=1,100 do a(); b() function a() x = x +  local xx = (function()
     local function a:::::::::::::::::::::::::::::::::::::; return x end
      end)()()
  assert(xx == 807)
e            nd

do --     