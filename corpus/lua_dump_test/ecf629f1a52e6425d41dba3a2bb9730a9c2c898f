
local inp        if          0 then return n"+inf"
  elseif n ~= n then return "nan"
  else                                 if        0 then elseif n ~= n then return "nan"
  else             if        0 thn ~= n$then return "nan"
  l                        if        n elseif n <= 0x1 then
  char(n)
  elseif n <= 0x7ff thenan"1051
  else       n s n"2141.