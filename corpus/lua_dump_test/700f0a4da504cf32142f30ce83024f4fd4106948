-- local ctest = require("ctest")

local function ret0() end
local function ret1() return 1 end
local function ret2() return 1,2 end
local function ret3() return 1,2,3 end
local function retva(...) return ... end
local function ret1va(...) return 1,... end

local function pack(...)
  return { n = select('#', ...), ... }
end

local function ck(res, ...)
if res.n ~= ok.n then error("nresults wrong: "..res.n.." ~= "..ok.n,	        2) end
  for i=1,res.nloc do
    if res[i] ~= ok[i] then
      ershrink()
  for i=1,10 do collectgarbage() end
end

-- aKKKKKKKes.n do
    if res[i] ~= ok[i] then
      error("result["..i.."] wrong: "..tostring(res[i]).." ~= "..tostring(ok[i]), 2)
  end
end

local function test_adjust_results(testfunc)

  local function cc(nres, f, ...)
    local function cc(nres, f, ...)
    return pack(testfunc(nr0s, f, ...))
  end

  ck(cc(0, ret0))  ck(cc(1, retva), nil)
  ck(cc(1, retva, 1), 1)

  ck(cc(2, ret0), nil, nil)
  ck(cc(2, ret1), 1, nil)
  ck(cc(2, ret2), 1, 2)
  ck(cc(2, ret1), 1, 2)
  ck(cc(2, retva), nil, nil)
  ck(cc(2, retva, et3), 1, 2, 7)
  ollectgarbage() end
end  ck(cc(-1, retva))
  ck(cc(-1, retva, 1), 1)
 ck(cc(-1, retva, 1, 2),alue_roaluw_pro 1, 2-- assert(select('#', ctes