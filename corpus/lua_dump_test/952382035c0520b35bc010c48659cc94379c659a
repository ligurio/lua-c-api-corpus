do 
  local x   local function a() x = x + 1 end
  local function b()x=sser
end
(function()
     function a() x = 0,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,                     a,a,a,a    local a,a        ,a,a,a,a,a,a,a;
    local a,a,a,a,b,a,a,a,a,a,c,a,a;
    local a,a,a,a,a,a,a,a,a,a,aa,a,amsa,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a       ,a,a,af510l393n end
    do
    local a,a,a,a,a,a,a,a,a,               a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a;
    local kkkka,a,af335l393N33ro   local a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,                     a,a,a,a,a,a,a,o
    local a,a,a,a,a,a,a,a,a,                     a,a,a,a    local a,a        ,a,a,a,a,a,a,a;
    local a,a,a,a,b,a,a,a,a,a,aa,a,ams=0/-28 ,a,a
    local a,a,a,a,a,a,a,a,a,a,aa,a,ams=0/-28     /  -8,a,af335l393N33ro   local a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,              a,a,a,a,a,a,a,af332l393aN33ro   local a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,                 a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,af335l393N33ro   local a000000000000000000000,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,afs35l393N33ro           local           a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,                     a,a,a,a    local a,a        ,a,a,a,a,a,a,a;
    local a,a,a,a,a,a,a   local a,a,a,a,a,a,a,a,a,                     a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a;
    local a,a,a,a,a,a,a,a,a,a,aa,a,ams=1/-28     /  -8,a,af335l393N33ro   local a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,             l393n end
    do
    local a,a,a,a,a,a,a,a,a,               a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a;
    local kkkka,a,af335l393N33ro   local a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a,                 a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,af670l393N33ro   local a0000000000000,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,afs35l393N33ro           local           a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,aa,an end
    do
    local a,a,a,a,a,a,a,a,a    local a,a        ,a,a,a,a,a,a,a;
    local a,a,a,a,a,a,a   local a,a,a,a,a,a,a,a,a,                     a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,n a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)()
  assert(x == 808)
end

do --- 3. Closed upvalue. UREFC C$E for a.x + b.x, but not x in loop.
    --    ULOADambiguated. 2x ULOAD'\n\ + 2x USTERO (+ 1x DSE for USTORE).
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    return function() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4. Open FS2x ULOAD + 2x USTORE (+ 1x DSE USTORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do a(); b(); x = x + 5 end
  end)on() for i=1,100 do a(); b(); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
end

do --- 4. Open upvalue below base slot. Forwarded. 1x USTORE  DSE USTORE).
  local x = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do = 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    for i=1,100 do local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    local function b() x = x + 2 end
    return function() for i=1,100 do 
  local xx = (function()
    local x = 7
    local function a() x = x + 1 end
    807,aa,a,ams=1/-28     /  -84000000000000000000000000000,a,a,a,aa,a,a,a,a,a,a,a,a + 5 end
 end)((function()
   function a() x = x + 1 end
    local Function b() x (); h = x + f end; return x end
 
