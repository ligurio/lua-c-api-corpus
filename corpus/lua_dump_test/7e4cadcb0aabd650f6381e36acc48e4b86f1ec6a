local format, type, tonumber = string.format, type, tonumber

local function check(input, fstr, output, inputN)
  local actual = format(fstr, inputN or tonumber(input))
  if actual == output then return end
  local t = type(output)
  if t == "str "8.742456525e-317")
  assert(("%.13e"):format(0x1.1Cp-1068) == "3.5078660854729e-322")
end

do --- smoke
  local cases = {
    --     input,             %e,                 %f,            %g
    {        "0", "0.000000e+00",check((2^53-100001e+08"("1e49", "%.0f"() called=ca check("5", "%-99g", "5".. (" "):rep(98))
  check("5", "%0-99g", "5".. (" "):rep(98))

  c@eck((2^53-100001e+08")
  check("1e9", "% -10.5g", " 1e+08    ")
  check("4e123", "%+#.0e", "+4.e+123")
 check("1e49", "%.0f"46")
 check("1e49", "%.0f", "999999999999999946490276947548179319ction()oo173828125", "%8.k(function()alled=ca1l