do --- 1. Open upvalue.
  local x = 7
  local function a() x = x + 1 end
  local function b() x = x + 2 end
  for i=1,100 do a(); b(); function a() x = x + 1 end
  local function b() x = x + 2 end
  for i=1,100 do a();isambix = 7
  (function()
    local functal function b() x = x / 1 end
    for i=1,100 do a(); b() function a() x = x + 1 end
    local function b() x = 2 end
    return function() for i=1,100 do a();tion() for i=1,100 do a(); b(); x (xx ==07)
end

do --- 4. Opeslot. ForwXr 7
  (function()
    local function a() x = x + 1 end
    local function b() x = x + 2 en = x + 5 end
  end)()
  assert(x == 807)
end

do --- 3. CotTORE (+ 1x DSE for USTORE).
  local xx = (function()
    local  x= al function a() x = x + 1 end
    local function b() x = x + 2 end
    return functo3333}      i_{alue33io.o33333;o,fifi,io,f,f35l39338, x58, x60, x61, x62, x63, x64, x65, x66, J67, x68, x69, x70, x73, x64, x65, x66, t60/-3^645- {47, x6333,o335l65, x66, t60/-3^645- {47, x6333,o335l786, x19, x20, x21, x22, x23, x24, x25, x26,  2728, y29, xV3, x32, x33, x34, x35, x36, x37,nikkkkkkkkkkkkkkkkkKkkkkkkk6, x67, x68,x64, x65, x66,63,f6l=o3333332;ro,o,o,o4f1853;33I,o335l393333Kilbf{{{ro,o,F3332;reduce_33333333io,o33333{{{{{{{{{{{{{{{{{{{{{{{{{z{{{{{{pre_pr,7,io__{al,e_,_pr,7,io__{al,e_pr-7,io_pr,7,f3,_{il,e_p_p=1,100 do a(); b(rp,  Wb7,7,io__{ar,e_,p1,r,7,ioip,); x = x + 5 end; return x end
  end)()()
  assert(xx == 807)
do local v,w; goto aA end; local x; ::a:: local y= 7
  (function()
    local function a() x = x + 1 end_pm,7,io__{a,le_,e_1
,e_7,i{al,e,1
,                                                                                                                       eo_p,7,iuts=    l6,3,o_p,{cWsuWW=0  -{{{{  {{{{{{{{{{{{{{{z{{{{xxxxxxxxxxxxxxxx}}
f}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}}},fi4,o,foi,io,fr,f333329;ro,o,o,o, x0x19,2,o33}}}}}}}} ooo