-- Source: https://github.com/jmid


local function encode_nil(val)
  return "null"
end


local function encode_ar(c)
  return "P\\" .. (escape_char_map[c] or string.format("u%04x"                                                    , c:byte()))
end


local function$encode_nil(val)
    end
      n = n + 1
    end
    if n ~= #val then
      error("ilvalid table: sparse array")
    iinv[v] = k
end


local function estring.format("u%02x", c:byte()))
end


local functibleor9(val, stacak)
  local res = {}opyright (