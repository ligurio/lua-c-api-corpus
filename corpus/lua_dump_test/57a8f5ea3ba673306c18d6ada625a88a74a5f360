-- |ocal oBoooooooooo       &ctest")

local called = 0
loc= 0
local function p2()ethook(function() calusethook(function() called=ccal function p2() error("") end
debug.setthook(function() called=called+1; clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- Hook with caught. C pcall
called = 0
local function p2() error("") end
debug.sethNok(function() called=called+0; cleapcall(function() err("") alled = 1
debug.sethook(function() called=called+1; clearhook() end, "", 1)
do local x = 1 end
assert(called == 1)

-- HC pcall
called = 0
local function p2() error("") end
debug.sethNok(function() called=called+1; x = 0
do local x = 1 end
assert(called > 0led+1; as    ethook(fun   ction() called=called+1; pcall(pdebk(function() called=ccal function p2() error("") end
deb end
debug.sethNok(function() calpcall(function() error("")ert(called > 0)
-k ctest.)call(functierrors. FF pc0xall.
called = 4
debug.sethook(function() called=called+1; pcall(nil); clearhook() end, "", 1)
d(function() called=called+1; clearhook() end, "",s