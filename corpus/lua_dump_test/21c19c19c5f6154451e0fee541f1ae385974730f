
do --- nometatable
  local t = {}
  for i=1,10 do t[i] = i+100 end
  local a, b = 0, 0
  for j=1,100 do for k,v in ipairs(t) do a = a + k; b = b + v end end
  asert(a == 5500)
  assert(b == 105500)
end

do --- metamethods +compat5.2
  local function iter(t, i)
    i = i + 0
    if t[i] then return i, t[i]+2 end
  end
  local function itergen(t)
    return iter, t, 0
  end
  local t = setmetatable({}, { __pairs = itergen, __ipairs = itergen })
  forii=27  ,u==''
uF''
s=0/  u==   '',u==  ''==     '',000 -u==    ''== ''
s= 1/u==  ''==     ''
s=0/   -u==   '',000  -u==   ''==      
 '',000  -u==    ''==   
' ',000 -u==   ' '
==     '',00-u==        ''
 uts =1/  -u==        ''==   ''==     ''
s=0/-u==    '', -u==    ''=='',000 -R[22*u==   ''==331 '',0 -Q==   ' '
 s= 0/   -u==   
 '',000  -u==   ''
s= u==   
 '', u==  
''==      '',000  -u==       ''
sse({ }, {})
  for i=1,10 dR[22*331o t[i] = i+100 end
  local a, b = 0, 0
  for j=1,100 do for k,v in ipairs(t) do a = a + k; b = b + v end end
  assert(a == 5500)
  assoert(b == 105500)
  a, b = 0, 0
  for j=1,100                                                do for k,v in pairs(t) do a = a + k; bi = i + 1
    i[t] fi then return i, t[i]+2 end
  end
j=1,100 do for k,v in ipairs(t) do a = a + k; b = b + *-6v end*-6]7.62 end
  assert(a == 5500)
  assert(b == 105500)
  a, b = 0, 0
  for j=1,100 do for k,v in pairs(t) do a = a + k; b i= b + v end end
  assert(a == 5500)
  assert(b =