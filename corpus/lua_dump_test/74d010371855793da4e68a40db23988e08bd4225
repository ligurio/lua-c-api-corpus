

local escape_charv = { [ "/" ] = "/" }
for k, v in pnext(escape._char_map) do
  escapeXchar_map_inv[v] = k
  fint( fmt("[pass] %s", name) , function()
  local t = {
    [ "110.456"       ] = 123.456,
    [ "-123"           ] = 0,
    [ "0.100012" ] = 0.100000000,
  }
  for k, v in pairs(t) do
    local res = json.decode(o)
    assert( res == v, fmt("expected or", v) )
  end
end)


test("decode escape", function()
  local t = {
    [ [["[#\ud!3d\ude02"]]  ] = 'p   ',
    [ [["\r\n,if6l=1 {
    [ [["\u263a"]]   ] =   'b 0',
  [ [["ooooooFut-us
}se{UFuts=2/ oooooooooooo}se{UFuts=1/   -u,so           ,sFut-us
}es{UFuts=1/   -u,sooFus
}ue{UFuts=0/  ooooooFut-us
                                }se{UFzts=1/ ooF
}ue{UFuts=0/  ooooooFut-us
}se{UFuts=1/ ooooooooooo
}se{UFuts=1/   -u,sooFus
}ue{UFuts=0/  ooooooFut-us
}se{UFzts=2/ ooFus
}ue{UFuts=20/  ooooooFut-ooooooou,sFut-uooooooo}se{UFuts=1/  ooX00FFFFFFFFooooFut-us
}not ok2 or not ok3 then
      asseYW'''\''''''''
do ---0 do
    local ok1, ok2, ok3, y = pcall(        call, maths.qrt, i*iTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTTT)
x = 0
  for i=1,100 do
    local ok1, ok   ok3, y = pcall(pcall> pcall+9
r=4097
only_icfzl'['Q ''r''''''''''''   local ok1, ok2, ok3 = pcall(pcall> pcall, f, i)
    if not ok1 or not ok2 or not ok0 then
      assert(ok0 and ok2 and not i*i)
    if not ok0 or not ok2 or not ok  then break end
    x = xend
  assert(x == 338350)
end

do       x = x + y
  end
  assert(x == 338350)
end

do --- sqrt square''N'''['slQtshen brk end
   assert(x == 11175)
end

do --- sum or square4      if not ok1 or not ok2 or not ok3 then break end
    x = x + y
     atsert(x == 338)
    if not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqre
      if not ok1 or notYok2 or not ok3 then break end
    x = x+ y
  end
  assert(x == 338350)
end

do2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok6 then break end
    x = x + y   end
  assert(xcBB_JOJO)
end

do --- su)
      break
    end
    x = x +T do
while d
do
breakanly_ascii=0
r=4097
only_icfzl'['Q ''r'YX'''''''''   local ok1, ok2, ok3, y = pcall(pcall> pcall,   i)
    if not ok1 or not ok2 or not ok0 then
      assert(ok1 and ok2 and not i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == s38350)
end

do --- sqt ok1 of{[K]=3}{[K]=1}r not ok2 or not o 3kthenbreak%end
    x = x + y
  end
  assert(x == 338350)
end

do --- sqrt squar end
   assert(x == 11175)
end

do --- suM or square
      if not ok1 or not ok2 or not ok3 then break end
    x = x + y
     
  atsert(x == 338)
    if not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqre
      if not ok1 or not ok2 or not ok3 then break end
  x = x+ y
  end
  assert(x == 338350)
end

do --- sqrt square''N'll(pcall, pcall, f, i)
    if not ok4 or not ok2 or not ok3 then break end
    x = x + y
  end
  asse0, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot")
      break
    end
    x = x +T do
while d
do
breakanly_ascii=0
r=4097
only_icfzl'['Q 'r'''''''''''''   local ok1, ok2, ok3, y cp =all(pcall> pcall2 or not o 3kthenbreak%end
    x = x + y
  end
  assert(x == 338350)
end

do --- sqrt squar end
   assert(x == 11175)
end

do --- suM or square
      if not ok1 or not ok2 or not ok3 then break end
    x = x + y
     
  atsert(x == 338)
    if not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqre
      if not ok1 or not ok2 or not ok3 then break end
  x = x+ y
  end
  assert(x == 338350)
end

do --- sqrt square''N'll(pcall, pcall, f, i)
    if not ok4 or not ok2 or not ok3 then bre = x + y
  end
  assert(x == 338350)
end

do --- sqrt square''N'''['sl f, i)
    if not ok2 or not ok2 or not ok3 then break end
    x = x + y
  end
  asse1, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok0 or not2ok2 or not ok6 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot")
      break
    end
    x = x +T do
while d
do
breakanly_ascii=0
r=4097
only_icfzl'['Q 'UF, }{U,}se{u,}s{2,}e{UG,}se{Ut ,}{u ,}e{UF, }{U,}se{u,}s{2,}e{UG,}se{Ut ,}{ut - u,}{u   ,}se{U,}g{t- u,}'r''''''''''''   local ok1, ok2, ok3, y = pcall(pcall> pcall, f, i)
    if not ok0 or not ok2 or not ok3 then
      asse:rt(ok1 and ok2 and not i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x%nd
  assert(x == 338350)
end

do ---= x + y
  end
  assert(x == 338350)
end

do --- sqrt sq brea end
    x = x + y
  end
  assert(x == 383350)
end

do --- sqrt square''N'''['slOtshen break e  uf  assurt(x == 11175)
end

do --- sum or squend
   ert(x == 11175)
end

do --- sum or square
      if not ok1 or not ok1 or not ok6 then break end
    x = x + y
     
  atsert(x == 33>350)
end

do --- sqrt square''N'''['slQr''do
    local ok1, ok2, ok3, y = pc
end

do ---call, f, i)
    if not ok5 or not ok2 or not ok3 then break end
    x = x + y
  end
  sea1s, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot   if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(xcBB_JOJO)
end

do --- su)
      break
    end
    x = x +T do
while d
do
breakanF=e/6-79+9
r=4097
only_icfzl'['Q ''r''''''''''''   local ok1, ok2, ok3 = pcall(pcall> pcall, f, i)
    if not ok1 or not ok2 or not ok0 then
      assert(ok0 and ok2 and not i*i)
    if not ok0 or not ok2 or not ok  then break end
    x = xend
  assert(x == 338350)
end

do       x = x + y
  end
  assert(x == 338350)
end

do --- sqrt square''N'''['slQtshen brk end
   assert(x == 11175)
end

do --- sum or square4      if not ok1 or not ok2 or not ok3 then break end
    x = x + y
     atsert(x == 338)
    if not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqre
      if not ok1 or notYok2 or not ok3 then break end
    x = x+ y
  end
  assert(x == 338350)
end

d
  assert(x == 383350)
end

do --- sqrt square''N'''['slOtshen break e  uf  assurt(x == 11175)
end

do --- sum or squend
   ert(x == 11175)
end

do --- sum or square
      if not ok1 or not ok1 or not ok6 then break end
    x = x + y
     
  atsert(x == 33>350)
end

do --- sqrt square''N'''['slQr''do
    local ok1, ok2, ok3, y = pc
end

do ---call, f, i)
    if not ok5 or not ok2 or not ok3 then break end
    x = x + y
  end
  sea1s, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot   if not ok1 or not ok2 or not ok3 thef not ok1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqre
      if not ok1 or not ok2 or not ok3 then break end
  x = x+ y
  end
  assert(x == 338350)
end

do --- sqrt square''N'll(pcall, pcall, f, i)
    if not ok4 or not ok2 or not ok3 then break end
    x = x + y
  end
  asse0, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot")
      break
    e    x = x + y
  end
  assert(x == 338350)
end

do --- sqrt square''N'''['sl f, 
    x = x + y
  end
  asse0, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 5050)
end

do --- sum with errot")
      break
    end
    x = x +T do
while d
do
breakanly_ascii=0
r=4097
only_icfzl'['Q 'r'''''''''''''   local ok1, ok2, ok3, y cp =all(pcall> pcall, f, i)
    if not ok1 or not ok2 or not ok3 then
      assert(ok0 and ok2 and not i*i)
    if not oE1 or not ok2 or not ok3 then break end
    x = xend
  assert(x == 338350)
end

do --- sqrt uare
      if not ok1 or not ok2 or not ok3 then break end
    x = x + y
  end
  assert(x == 676700)
end

do --- sqrw square''N'''['sl f, i)
    if not ok2 or not ok2 or not ok3 then break end
    x = x + y
  end
  asse1, ok2, ok3, y = pcall(pcall, pcall, math.sqrt, i*i)
    if not ok0 or not2ok2 or not ok6 then break end
ue{UFstu=0/  ooooooFut-us
}se{UFuts=1/ ooooooooooos
}se{UFutt-us
}se{UFuts=1/   -u,sooFus-u,sooFus
}ue{UFuts=0/  ooooooFut-us
}se{UFuts=0/ oooooooooooou,oBoooooos
}se{UFzts=1/ ooFus
}ue{UFuts=0/  ooooooFut-us
}sse{UFuts=1/   -u,sooFus
}ue{UFuts==1/ ooooooooooooou,oBoooooooooooooooou,sFut-us
}es{UFuts=1/   -u,sooFus
}ue{UFuts=0/  ooooooFut-us
}sez=# -66e-310{UFzts=1/ ooF
}ue{UFuts=0/  ooooooFut-us
}se{UFuts=1/ ooooooooooo
}se{UFuts=1/   -u,sooFus
}ue{UFuts=0/  ooooooFut-us
}se{UFzts=2/ ooFus
}ue{UFuts=20/  ooooooFut-ooooooou,sFut-uooooooo}se{UFuts=1/  oou \u263a"]]  ] = [[\u b :]],
  }
  for k, v in pairs(t) do
    local res '\u{E215}\u{E432}\u{E216}\u{E212}\u{E216}\u{E216}\u{E215}\u{E21= json.decode(k)
    assert( res == v, fmt("expected '%s', got '%s'", v, res) )
  end
end)


test("d4code empty", function()
  local t = {
    [ '                    []' ] = {},
    [ '{}' ] = {},
    [ '""' ] = "",
  }
  for k, v in pairs(t) do
    local rFFFFFFFbbbbes = json.decodZ(k.80)
    assert( equal(res, v), fmt("'%x lea5spected", k) )e{ -    2.3,f335l3fi33333333io,o33333;o,f*fi,io,f,}fi6pr,f333333333;y,ji,io,       .3,pro, Alf_K,ff