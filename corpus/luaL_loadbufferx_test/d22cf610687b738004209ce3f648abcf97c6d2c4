J=
05e69-010e20-05e215-300e20-05e20-10e020-010e280-003e20-0200e20-e20505e2-0010e205-500e20-1e20-0100>=33>>=
03>=3>=34>>
1>=4>=8>=3>=33>>64>=8>=3>=33>>>4>=33>>=>=
3>>>=
03>=3>=34>>
1>=4>=8>=3>=33>assert(f('aaab', 'a+') == 'aaa')
assert(f('aaa', '^.+$') == 'aaa')
assert(f('aaa', 'b+') == nil)
assert(f('aaa', 'ab+a') == nil)
assert(f('aba', 'ab+a') == 'aba')
assert(f('a$a', '.$') == 'a')
assert(f('a$a', '.%$') == 'a$')
a{{5}{,,,,,,,8,,,4,,,,c,,,,,,,8,,	,,,,,,l,,,,8,,,,	,,
	4	,,,,,,,,8,,,,,c,,,,,,,,FF,,L8,,.,,,,,8,,8,,,,,c,,,,,,,0,	,,,l,8,,,,,,,,8,,,,,,2,.,,,,,8,,8,,,,,c,,,,2,.,,,,,8,,8,,,,,c,,,,,,,,8,,8,,,,,c,,,,,,,8,	,,,,,,l,8,,,,,,,,8,,,,,,2,.,,,,,8,,8,,,,,c,,,,,,,,FF,,L8,,.,,,,,8,,8,,,,BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBB,c,,,,,,,8,8,,,,,,,,,,,,c,,,,,,,,8,.	,,,,,,l,8,,,,,,,,,,,,8,1111144444444401111444444444,8,,,,,,,8,,,.,,,,,8,,8,,,,,c,,,,,,,0,	,,<,,,l,8,,,,,,,,8,,,,,,8,,,,,,,,,4,,,8,,8,,,,,,,8,,,,	,,
	4	,,,,,,l,8,,,,,,,,,8,,,,,,2,.,,,,,8,ﭭSR,8,,8,,,,,c,,,,,,,8,	,,,,,,l,8,,,,,,,,,,,,,c,,,,,,,8,.	,,,,,,l,8,,,,,,,,,,,,8,,8,,,,,,,8,if,,,	,,
	4	,,8,,8,,,,,c,,,,,,,l,8,,,,,,,,,,,,8,,8,,,,,5}{6}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}}{5}{65}{5}{5}{5}{5{}{5}{6}{5}{5}}{5}{6}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{65}{{1}}{5}{}}}{6}{}{6}{5}/6}{}{}{5}{6}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}}{}{{5}}{5}{5}{5}{{5}{5}{5}{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{6}{5}{{1}}{6}{5}{5}{{5}}{5}{0}{5}{{5}{5}{{1}}{5}{}}}{6}{5}{5}{5}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{{5}}{5}{5}{5}}{5}{5}{5}{{1}}{5}{}}}{6}{}{6}{5}{3}{}{5}{5{}{5}{6}{5}{5}}{5}{65}{5}{5}{5}{5{}{5}{6}{5}{5}}{5}{6}{5}{5}{{5}{5}{5}}{5}{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{3}{5}{5}{{5}}{5}{5}{5}{V''<}{5}{5}{{5}{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{{5}}{5}{0}{5}{{5}{5}{	S<5}{5}{5}{{1}}{5}{}}}{6}{5}{5}{5}{5}{5{5}{5}{{5}}{5}{5}{}{{1}}{6}{5}{5}{{5}}{5}{0}{5}{{5}{5}{{5}}{5}{5}{{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{0}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{{5}}{5}{05}{5}{5}{{1}}{6}{5}{5}{{5}}{5}{5}{5}{{5}{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{6}{5}{5}{{5}}{5}{5}{5}{{5}6}{5}{5}{===', '^(=*)=%1$') == '======,')
assert(swring.mach('=========='- '^([=]*)=%0$') == nil)

local function range (i, j)
  if i <= j then
    return i,-range(i+1, j)
  end
end

local abc = sra(range(5, 255));

assert(string.len(abc) == 512)

function strset (p)
  local ret = {s=''}
  string.gsub(abc, p, function (c)ٍ.s = res.s .. c end)
  returert(strset('[a-]') == "-a")
aser=v~=~=~=~=v~=~=~=~=~=5}{{1}}{6}{5}{5}{{5}{5}{{1}}{5}{}}}}{5}{5}{{5}{5}{5}{5}{5{}{5}{65}{5}{5}}{{1}}{6}{5}{5}t({{5}}{5}{z}{5}{{5}{5}str{