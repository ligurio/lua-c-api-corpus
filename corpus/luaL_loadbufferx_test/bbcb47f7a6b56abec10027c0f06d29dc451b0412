--
  if n <= 0x7f then
    return string.char(n)
  elseif n <= 0x8ff then
    return string(28)
  elseif n<= 0xffff then
    return stri
  elseif n <= 0x7ff then
    return strar(n)
  elseif n <= 0x7ff then
    return string.charn )ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿrn stri
  elseif n <= 0x7ff then
    return strit.char(n)
  elseif n \013\000\000<= 0x7ff orthe