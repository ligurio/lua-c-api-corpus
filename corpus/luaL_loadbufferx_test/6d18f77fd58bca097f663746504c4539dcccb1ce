J=
05e69-010e20-05e215-300e20-05e20-10e020-010e280-003e20-0200e20-e20505e2-0010e205-500e20-1e20-0100>=33>н>=
03>=3>=34>н>
1>=4>=8>=3>=33>н>64>=8>=3>=33>н>н>4>=33>н>=н>=
Џ3>н>н>=
03>=3>=34>н>
1>=4>=8>=3>=33>assert(f('aaab', 'a+') == 'aaa')
assert(f('aaa', '^.+$') == 'aaa')
assert(f('aaa', 'b+') == nil)
assert(f('aaa', 'ab+a') == nil)
assert(f('aba', 'ab+a') == 'aba')
assert(f('a$a', '.$') == 'a')
assert(f('a$a', '.%$') == 'a$')
aю{ю{5}{пл,К,ккК,х,К,хх,К,К8,К,К,К4€€€К,хх,К,Кх,c€€,К,х,х,К,х,К,К8,Г,хк	,н,х,К,хх, ,ххl,К,хх,К,К8,К,К,ххК,хк	,н,
	хк4	,€ы€€€К,х,К,хх,К,хх,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К€,хFF,К,LК8,хК,х.К,хх,п,€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К0,хк	,н,€€€€€€€€,ххlК,К8,К,€,К,с,х,Кх,К,К8,К,К,хх,сх,К,К2К,х.К,хх,п,€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К2К,х.К,хх,п,€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К8,хк	,н,х,К,хх,К,ххlК,К8,К,€,К,с,х,Кх,К,К8,К,К,хх,сх,К,К2К,х.К,хх,п,€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К€,хFF,К,LК8,хК,х.К,хх,п,€,К,К8,К,К8,К,хх,К,BBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBх,c€€,К,х,х,К,х,К,К8,хк8,К,€,К,с,х,К,х,К,€€€К,хх,К,х€cК,€,К,х,х,К,х,К,К8,Г.хк	,н,х,К,хх,К,ххlК,К8,К,€,К,с,х,К,х,К,К€€К,хх,К,К8,≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠≠€К1€Ж1111444444444≠≠≠≠≠≠≠ђН≠≠≠≠≠≠≠≠≠≠≠≠≠€К0€Ж1111444444444К,К8,К,х,х,К,хх,К,К8,К,К,х.К,хх,п,€,К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К0,хк	,н,х<К,хх,К,ххlК,К8,К,€,К,с,х,Кх,К,К8,К,К,хх,сх,К,КК8,К,€,К,с,х,К,х,К,К4€€€К,хх,К,К8,К,К8,К,х,х,К,хх,К,К8,К,К,ххК,хк	,н,
	хвк4	,€ы€€€К,х,К,хх,К,ххlК,К8,К,€,К,с,х,К,х,К,К8,К,К,хх,сх,К,К2К,х.К,хх,п,€,К,К8,К≠п≠≠≠≠Ѓ≠≠SR≠≠К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,х,К,К8,хк	,н,х,К,хх,К,ххlК,К8,К,€,М,с,х,К,х,К,€€€К,хх,К,Кх,c€€,К,х,х,К,х,К,К8,Г.хк	,н,х,К,хх,К,ххlК,К8,К,€,К,с,х,К,х,К,К€€К,хх,К,К8,К,К8,К,х,х,К,ххю€€Ї,К,К8,Кif,К,ххК,хк	,н,
	хк4	,€К,К8,К,К8,К,хх,К,х,c€€,К,х,х,К,ххх,К,ххlК,К8,К,€,К,с,х,К,х,К,К€€К,хх,К,К8,К,К8,К,х,х,К,5}{6}{5}{5}{€{5}{5}{5}{5}{€5{}{5}{6}{5}{5}}{5}{65}{5}{5}{5}{€5{}{5}{6}{5}{5}}{5}{6}{5}{5}{€{5}{5}{5}{5}{€5{}{5}{6}{5}{5}{€{5}}{5}{5}{5}{€{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{€{5}{5}{{1}}{5}{}}}}{5}{5}{€{5}{5}{5}{}}{6}{5}{5}{5}{5}{€5{5}{5}{€{5}}{5}{5}{}{{1}}{6}{5}{5}{€{5}}{5}{0}{5}{€{5}{5}{{5}}{5}{5}{€{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{€{5}{5}{0}{5}{€5{}{5}{6}{5}{5}{€{5}}{5}{5}{5}{€{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{€{5}}{5}{05}{5}{5}{{1}}{6}{5}{5}{€{5}}{5}{5}{5}{€{5}{5}{5}{5}{5}{{1}}{5}{}}}}{5}{5}{€{5}{5}{5}{5}{€5{}{5}{6}{5}{5}{€{5}}{5}{5}{5}{€{5}{5}{5}{5}{5}{{1}}{6}{5}{5}{€{5}}{5}{5}{5}{{1}}{5}{}}}{6}{5}{5}{===', '^(=*)=%1$') == '======,')
assert(swring.ma€ch('=========='- '^([=]*)=%0$') == nil)

local function range (i, j)
  if i <= j then
    return i,-range(i+\000)
  end
end

local abc = sМНЦШЧraФЬ—(ranГge(5, 255));

assert(string.len(abc) == 512)

function strset (p)
  local ret = {s=''}
  string.gsub(abc, p, function (c) res.s = res.s .. c end)
  returert(strset('[a-]') == "-a")
aНserееееееееееееееееееееееееееееееееееееееенее=v~=€~=€~=€~=v~=€~=х~=€~=х~=€5}{{1}}{6}{5}{5}{€{5}{5}{{1}}{5}{}}}}{5}{5}{€{5}{5}{5}{5}{€5{}{5}{65}{%}{5}}{{1}}{6}{5}{5}ееееееt({€{5}}{5}{z}{5}{€{5}{5}str{