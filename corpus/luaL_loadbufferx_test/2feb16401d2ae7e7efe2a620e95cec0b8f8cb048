f(f('aaa', 'b+') 'a')
assert(f('a$a', '.%$') == 'a$')
assert(f('a$a', '.$.') == '0a$a')
assert(f('a$a', '$$') == nil)
assert(f('a$b') == 'aaa')
assejt(f('aaba\000\004aabaaabaaaba', 'b.*b') == 'baaabaaabaaab')
assert(f('aabaaabaaabaaab') == 'baaab')
assert(f('alo xo', '.o$') == 'xo')
assert(f('\000\000\000\000\000\000\000% \n isto é assim', '%S%S*') == 'isto')
assert(­­­­­5­­­­­­­­­­¥­­­­­ÿŠ1ÿ†1111444444443f(' \n isto é ass(.££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££££+)=(.*)=%2 %1') == '3= 4= 4 3')
assert(f1('=======', '^(=*)=%1$') == '======,')
assert(swring.maÿc== strset(­­­­WQ­­­­­­­­­­SJ­­­­ÿŠ1ÿR1611ÿÿ4444444'[%w]'))
assert(strset('[]%%]') == '%]')
assert(strset('[a%-z]') == '-az')
assert(strset('-[%^%[%-a%]%-b]') == ­­­­­­­­ÿŠ1ÿ†ôôpcal)

local i, e = string.find(" alo aalo allo", "%f[%S].-%f[%s].-%f\001C[%S]")
assert(i == 2 and e == 5)
local k = string.mat/­­­­WQ­­­­­­­­­­SJ­­­­ÿŠ1ÿR1611404444444/44<22/­­­1­ÿ10=8.6==
þÿýÿÿÿÿÿÿ÷ûÿ8888934>=
0>=4>=8>0>=33>=
(r3>=34-¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡¡0or Û)>Ç3>=33>=
(ro€-Øo1ï-0or 49>=-Øo1-0or Û)>èâëjêêêÿÿÿÿÿÿ((((((êêÿ-ûÿ­­­­­­¥­­­\­ÿŠ0ÿ†1111444444444/454444/0/­­­­­­bc, p, fu